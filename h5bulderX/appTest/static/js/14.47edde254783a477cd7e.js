webpackJsonp([14],{kprW:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),r=s("exGp"),o=s.n(r),i=(s("f1Vh"),s("ZQVe")),d=s.n(i),l=s("7+uW"),c=s("teIl"),u=s("PZVu"),p=s("uWBr");l.default.component(d.a.name,d.a);c.a;l.default.component(d.a.name,d.a);var m=null,v={name:"register",components:{Header:c.a},data:function(){return{name:"",phone:"",password:"",rePassword:"",inviteCode:"",validCode:"",isAgreed:!1,passwordShowed:!1,sendCodeCD:0,siteName:""}},mounted:function(){this.$route.query.ib&&(this.inviteCode=u.a.trim(this.$route.query.ib)),this.siteName=document.title.split("-")[0]},beforeDestroy:function(){m&&(clearInterval(m),m=null)},methods:{showPassword:function(){this.passwordShowed=!this.passwordShowed},onSendCodeClicked:function(){var e=this;return o()(n.a.mark(function t(){var s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.phone.length<1)){t.next=3;break}return window.EventBus.$emit("globalMessage","请输入手机号码"),t.abrupt("return");case 3:if(u.a.isPhoneValid(e.phone)){t.next=6;break}return window.EventBus.$emit("globalMessage","请输入正确的手机号码"),t.abrupt("return");case 6:return t.next=8,Object(p._3)(e.phone,e.$store.state.User.uuid);case 8:200===(s=t.sent).code&&window.EventBus.$emit("globalMessage",s.msg),e.sendCodeCD=60,e.startTimer();case 12:case"end":return t.stop()}},t,e)}))()},startTimer:function(){var e=this;m=setInterval(function(){e.sendCodeCD>0?e.sendCodeCD--:(clearInterval(m),m=null)},1e3)},register:function(){var e=this;return o()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.name=u.a.trim(e.name),e.phone=u.a.trim(e.phone),e.password=u.a.trim(e.password),e.rePassword=u.a.trim(e.rePassword),e.validCode=u.a.trim(e.validCode),e.inviteCode=u.a.trim(e.inviteCode),!(e.name.length<0)){t.next=9;break}return window.EventBus.$emit("globalMessage","需要输出您的真实姓名"),t.abrupt("return");case 9:if(!(e.password.length<6)){t.next=12;break}return window.EventBus.$emit("globalMessage","密码至少为6位数"),t.abrupt("return");case 12:if(e.password===e.rePassword){t.next=15;break}return window.EventBus.$emit("globalMessage","两次输入的密码不一致"),t.abrupt("return");case 15:return t.next=17,Object(p.U)(e.name,e.phone,e.password,e.validCode,e.$store.state.User.uuid,e.inviteCode);case 17:200===t.sent.code&&(window.EventBus.$emit("globalMessage","注册成功，请使用您的用户名和密码登录"),setTimeout(function(){e.$router.push({path:"/login"})},2e3));case 19:case"end":return t.stop()}},t,e)}))()}}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mfw-page with-header page-session"},[s("Header",{attrs:{title:"注册账号"}}),e._v(" "),s("div",{staticClass:"padding"}),e._v(" "),s("div",{staticClass:"mfw-page-section"},[s("div",{staticClass:"section-content pd20"},[s("mt-field",{attrs:{placeholder:"请填写真实姓名",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),s("mt-field",{attrs:{placeholder:"请输入11位手机号",type:"tel"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),s("mt-field",{attrs:{placeholder:"请输入6-20位字母和数字组合的密码",type:e.passwordShowed?"text":"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[s("em",{staticClass:"e-privacy",class:{on:e.passwordShowed},on:{click:e.showPassword}})]),e._v(" "),s("mt-field",{attrs:{placeholder:"请再次输入密码",type:"password"},model:{value:e.rePassword,callback:function(t){e.rePassword=t},expression:"rePassword"}}),e._v(" "),s("mt-field",{attrs:{placeholder:"输入验证码",type:"text"},model:{value:e.validCode,callback:function(t){e.validCode=t},expression:"validCode"}},[s("button",{staticClass:"mfw-button size-sm primary btn-sendcode",attrs:{disabled:e.sendCodeCD>0},domProps:{textContent:e._s(0===e.sendCodeCD?"发送验证码":e.sendCodeCD+"秒后可以重发")},on:{click:e.onSendCodeClicked}})]),e._v(" "),s("mt-field",{attrs:{label:"邀请码",placeholder:"请填写机构/IB经纪人编码"},model:{value:e.inviteCode,callback:function(t){e.inviteCode=t},expression:"inviteCode"}}),e._v(" "),s("p",{staticClass:"p-agreement"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isAgreed,expression:"isAgreed"}],staticClass:"ipt",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isAgreed)?e._i(e.isAgreed,null)>-1:e.isAgreed},on:{change:function(t){var s=e.isAgreed,a=t.target,n=!!a.checked;if(Array.isArray(s)){var r=e._i(s,null);a.checked?r<0&&(e.isAgreed=s.concat([null])):r>-1&&(e.isAgreed=s.slice(0,r).concat(s.slice(r+1)))}else e.isAgreed=n}}}),e._v("\n        我已阅读并同意"),s("router-link",{attrs:{to:"/coopagree"}},[e._v("《"),s("span"),e._v("合作协议》")])],1)],1)]),e._v(" "),s("div",{staticClass:"menus"},[s("button",{staticClass:"mfw-button primary round size-lg",attrs:{disabled:!1===e.isAgreed||e.name.length<1||e.phone.length<1||e.password.length<1||e.rePassword.length<1||e.validCode.length<1},on:{click:e.register}},[e._v("注册")])])],1)},staticRenderFns:[]};var h=s("VU/8")(v,w,!1,function(e){s("rs2L")},null,null);t.default=h.exports},rs2L:function(e,t){}});
//# sourceMappingURL=14.47edde254783a477cd7e.js.map