{"version":3,"sources":["webpack:///./src/pages/Login/index.vue","webpack:///./src/pages/Login/index.vue?c1bd","webpack:///./src/pages/Login/index.vue?3abf"],"names":["vue_esm","component","field_default","a","name","Header","Login_timeStamp","pages_Login","components","data","phone","password","validCode","passwordShowed","catchaUrl","mounted","this","refreshCachaUrl","methods","Date","getTime","Object","API","$store","state","User","uuid","showPassword","login","_this","asyncToGenerator_default","regenerator_default","mark","_callee","res","wrap","_context","prev","next","TextUtil","trim","length","window","EventBus","$emit","abrupt","sent","code","CacheUtil","saveToCookie","token","commit","$route","query","backUrl","location","href","decodeURIComponent","backRoute","$router","replace","path","stop","selectortype_template_index_0_src_pages_Login","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","placeholder","type","model","value","callback","$$v","expression","class","on","click","directives","rawName","src","disabled","to","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.954009533075afaa6f3c.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Vue from 'vue'\nimport Header from '../../components/Header'\nimport {queryCaptcha, requestLogin} from '../../api/API'\nimport TextUtil from '../../utils/TextUtil'\nimport CacheUtil from '../../utils/CacheUtil'\nimport { Field } from 'mint-ui'\nVue.component(Field.name, Field)\nlet timeStamp = null\nexport default {\n  name: 'login',\n  components: {\n    Header\n  },\n  data () {\n    return {\n      phone: '',\n      password: '',\n      validCode: '',\n      passwordShowed: false,\n      catchaUrl: ''\n    }\n  },\n  mounted () {\n    this.refreshCachaUrl()\n  },\n  methods: {\n    refreshCachaUrl () {\n      timeStamp = new Date().getTime()\n      this.catchaUrl = queryCaptcha(this.$store.state.User.uuid, timeStamp)\n    },\n    showPassword () {\n      this.passwordShowed = !this.passwordShowed\n    },\n    async login () {\n      this.phone = TextUtil.trim(this.phone)\n      this.password = TextUtil.trim(this.password)\n      this.validCode = TextUtil.trim(this.validCode)\n      if (this.password.length < 6) {\n        window.EventBus.$emit('globalMessage', '密码至少为6位数')\n        return\n      }\n      let res = await requestLogin(this.phone, this.password, this.validCode, this.$store.state.User.uuid)\n      if (res.code === 200) {\n        CacheUtil.saveToCookie('dm_token', res.data.token, 3600 * 24)\n        this.$store.commit('User/updateToken', res.data.token)\n        this.$store.commit('User/updateUser', res.data)\n        window.EventBus.$emit('globalMessage', '登录成功')\n        if (this.$route.query.backUrl) {\n          window.location.href = decodeURIComponent(this.$route.query.backUrl)\n        } else if (this.$route.query.backRoute) {\n          this.$router.replace({path: decodeURIComponent(this.$route.query.backRoute)})\n        } else {\n          this.$router.replace({path: '/'})\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Login/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mfw-page with-header page-session\"},[_c('Header',{attrs:{\"title\":\"账号登录\"}}),_vm._v(\" \"),_c('div',{staticClass:\"padding\"}),_vm._v(\" \"),_c('div',{staticClass:\"mfw-page-section\"},[_c('div',{staticClass:\"section-content pd20\"},[_c('mt-field',{attrs:{\"placeholder\":\"请输入您的手机号\",\"type\":\"tel\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"placeholder\":\"请输入6-20位字母和数字组合的密码\",\"type\":_vm.passwordShowed? 'text' : 'password'},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}},[_c('em',{staticClass:\"e-privacy\",class:{'on': _vm.passwordShowed},on:{\"click\":_vm.showPassword}})]),_vm._v(\" \"),_c('mt-field',{attrs:{\"placeholder\":\"请输入验证码\",\"type\":\"text\"},model:{value:(_vm.validCode),callback:function ($$v) {_vm.validCode=$$v},expression:\"validCode\"}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.catchaUrl.length > 0),expression:\"catchaUrl.length > 0\"}],attrs:{\"src\":_vm.catchaUrl},on:{\"click\":_vm.refreshCachaUrl}})])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"menus\"},[_c('button',{staticClass:\"mfw-button primary round size-lg\",attrs:{\"disabled\":_vm.phone.length < 1 || _vm.password.length < 1 || _vm.validCode.length < 1},on:{\"click\":_vm.login}},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('p',{staticClass:\"sub clear-fix\"},[_c('router-link',{attrs:{\"to\":\"/register\"}},[_vm._v(\"新用户注册\")]),_vm._v(\" \"),_c('router-link',{staticClass:\"float-right red\",attrs:{\"to\":\"/resetpass\"}},[_vm._v(\"找回密码？\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4da822a3\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Login/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4da822a3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4da822a3\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Login/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}