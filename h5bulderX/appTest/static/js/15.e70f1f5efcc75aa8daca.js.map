{"version":3,"sources":["webpack:///./src/pages/Setting/resetpass.vue","webpack:///./src/pages/Setting/resetpass.vue?21a4","webpack:///./src/pages/Setting/resetpass.vue?f911"],"names":["vue_esm","component","field_default","a","name","Header","resetpass_timer","Setting_resetpass","components","data","step","phone","validCode","password","rePassword","passwordShowed","sendCodeCD","mounted","user","this","$store","state","User","mobile","methods","showPassword","onSendCodeClicked","_this","asyncToGenerator_default","regenerator_default","mark","_callee","res","wrap","_context","prev","next","length","window","EventBus","$emit","abrupt","TextUtil","isPhoneValid","Object","API","uuid","token","sent","code","msg","startTimer","stop","_this2","setInterval","clearInterval","onNextStepClicked","onResetPwd","_this3","_callee2","_context2","$router","go","pages_Setting_resetpass","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","directives","rawName","value","expression","placeholder","type","model","callback","$$v","disabled","domProps","textContent","_s","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.e70f1f5efcc75aa8daca.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Vue from 'vue'\nimport Header from '../../components/Header'\nimport TextUtil from '../../utils/TextUtil'\nimport { sendSMSCode, requestResetPwd } from '../../api/API'\nimport { Field } from 'mint-ui'\nVue.component(Field.name, Field)\nlet timer = null\nexport default {\n  name: 'login',\n  components: {\n    Header\n  },\n  data () {\n    return {\n      step: 1,\n      phone: '',\n      validCode: '',\n      password: '',\n      rePassword: '',\n      passwordShowed: false,\n      sendCodeCD: 0\n    }\n  },\n  mounted () {\n    let user = this.$store.state.User.user || {}\n    this.phone = user.mobile\n  },\n  methods: {\n    showPassword () {\n      this.passwordShowed = !this.passwordShowed\n    },\n    async onSendCodeClicked () {\n      if (this.phone.length < 1) {\n        window.EventBus.$emit('globalMessage', '请输入手机号码')\n        return\n      }\n      if (!TextUtil.isPhoneValid(this.phone)) {\n        window.EventBus.$emit('globalMessage', '请输入正确的手机号码')\n        return\n      }\n      let res = await sendSMSCode(this.phone, this.$store.state.User.uuid, this.$store.state.User.token)\n      if (res.code === 200) {\n        window.EventBus.$emit('globalMessage', res.msg)\n      }\n      this.sendCodeCD = 60\n      this.startTimer()\n    },\n    startTimer () {\n      timer = setInterval(() => {\n        if (this.sendCodeCD > 0) {\n          this.sendCodeCD--\n        } else {\n          clearInterval(timer)\n        }\n      }, 1000)\n    },\n    onNextStepClicked () {\n      if (!TextUtil.isPhoneValid(this.phone)) {\n        window.EventBus.$emit('globalMessage', '请输入正确的手机号码')\n        return\n      }\n      if (!this.validCode) {\n        window.EventBus.$emit('globalMessage', '请输入短信验证码')\n        return\n      }\n      this.step = 2\n    },\n    async onResetPwd () {\n      if (!this.password || !this.rePassword || (this.password !== this.rePassword)) {\n        window.EventBus.$emit('globalMessage', '请输入正确的密码和重复密码')\n        return\n      }\n      let user = this.$store.state.User || {}\n      let res = await requestResetPwd(user.uuid, this.phone, this.password, this.rePassword, this.validCode)\n      window.EventBus.$emit('globalMessage', res.msg)\n      if (res.code === 200) {\n        this.$router.go(-1)\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Setting/resetpass.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mfw-page with-header page-session\"},[_c('Header',{attrs:{\"title\":\"重置密码\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mfw-page-section\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 1),expression:\"step === 1\"}],staticClass:\"section-content pd20\"},[_c('mt-field',{attrs:{\"placeholder\":\"请输入11位手机号\",\"type\":\"tel\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"placeholder\":\"输入验证码\",\"type\":\"text\"},model:{value:(_vm.validCode),callback:function ($$v) {_vm.validCode=$$v},expression:\"validCode\"}},[_c('button',{staticClass:\"mfw-button size-sm primary btn-sendcode\",attrs:{\"disabled\":_vm.sendCodeCD > 0},domProps:{\"textContent\":_vm._s(_vm.sendCodeCD === 0 ? '发送验证码' : (_vm.sendCodeCD + \"秒后重新发送\"))},on:{\"click\":_vm.onSendCodeClicked}})])],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 2),expression:\"step === 2\"}],staticClass:\"mfw-page-section\"},[_c('div',{staticClass:\"section-content pd20\"},[_c('mt-field',{attrs:{\"placeholder\":\"请输入新的密码\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"placeholder\":\"请再次输入新的密码\",\"type\":\"password\"},model:{value:(_vm.rePassword),callback:function ($$v) {_vm.rePassword=$$v},expression:\"rePassword\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"menus\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 1),expression:\"step === 1\"}],staticClass:\"mfw-button primary round size-lg\",on:{\"click\":_vm.onNextStepClicked}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 2),expression:\"step === 2\"}],staticClass:\"mfw-button primary round size-lg\",on:{\"click\":_vm.onResetPwd}},[_vm._v(\"重置密码\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6371323c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Setting/resetpass.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6371323c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./resetpass.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./resetpass.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./resetpass.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6371323c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./resetpass.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Setting/resetpass.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}