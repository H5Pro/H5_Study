webpackJsonp([18],{HuCv:function(e,t){},r99a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),o=a.n(s),r=a("exGp"),n=a.n(r),i=(a("f1Vh"),a("ZQVe")),l=a.n(i),d=a("7+uW"),c=a("teIl"),u=a("uWBr"),p=a("PZVu"),h=a("sfuR");d.default.component(l.a.name,l.a);c.a;d.default.component(l.a.name,l.a);var v=null,w={name:"login",components:{Header:c.a},data:function(){return{phone:"",password:"",validCode:"",passwordShowed:!1,catchaUrl:""}},mounted:function(){this.refreshCachaUrl()},methods:{refreshCachaUrl:function(){v=(new Date).getTime(),this.catchaUrl=Object(u.e)(this.$store.state.User.uuid,v)},showPassword:function(){this.passwordShowed=!this.passwordShowed},login:function(){var e=this;return n()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.phone=p.a.trim(e.phone),e.password=p.a.trim(e.password),e.validCode=p.a.trim(e.validCode),!(e.password.length<6)){t.next=6;break}return window.EventBus.$emit("globalMessage","密码至少为6位数"),t.abrupt("return");case 6:return t.next=8,Object(u.H)(e.phone,e.password,e.validCode,e.$store.state.User.uuid);case 8:200===(a=t.sent).code&&(h.a.saveToCookie("dm_token",a.data.token,86400),e.$store.commit("User/updateToken",a.data.token),e.$store.commit("User/updateUser",a.data),window.EventBus.$emit("globalMessage","登录成功"),e.$route.query.backUrl?window.location.href=decodeURIComponent(e.$route.query.backUrl):e.$route.query.backRoute?e.$router.replace({path:decodeURIComponent(e.$route.query.backRoute)}):e.$router.replace({path:"/"}));case 10:case"end":return t.stop()}},t,e)}))()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mfw-page with-header page-session"},[a("Header",{attrs:{title:"账号登录"}}),e._v(" "),a("div",{staticClass:"padding"}),e._v(" "),a("div",{staticClass:"mfw-page-section"},[a("div",{staticClass:"section-content pd20"},[a("mt-field",{attrs:{placeholder:"请输入您的手机号",type:"tel"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),a("mt-field",{attrs:{placeholder:"请输入6-20位字母和数字组合的密码",type:e.passwordShowed?"text":"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[a("em",{staticClass:"e-privacy",class:{on:e.passwordShowed},on:{click:e.showPassword}})]),e._v(" "),a("mt-field",{attrs:{placeholder:"请输入验证码",type:"text"},model:{value:e.validCode,callback:function(t){e.validCode=t},expression:"validCode"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.catchaUrl.length>0,expression:"catchaUrl.length > 0"}],attrs:{src:e.catchaUrl},on:{click:e.refreshCachaUrl}})])],1)]),e._v(" "),a("div",{staticClass:"menus"},[a("button",{staticClass:"mfw-button primary round size-lg",attrs:{disabled:e.phone.length<1||e.password.length<1||e.validCode.length<1},on:{click:e.login}},[e._v("登录")]),e._v(" "),a("p",{staticClass:"sub clear-fix"},[a("router-link",{attrs:{to:"/register"}},[e._v("新用户注册")]),e._v(" "),a("router-link",{staticClass:"float-right red",attrs:{to:"/resetpass"}},[e._v("找回密码？")])],1)])],1)},staticRenderFns:[]};var f=a("VU/8")(w,m,!1,function(e){a("HuCv")},null,null);t.default=f.exports}});
//# sourceMappingURL=18.954009533075afaa6f3c.js.map