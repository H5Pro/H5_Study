{"version":3,"sources":["webpack:///./src/pages/Setting/setDealPass.vue","webpack:///./src/pages/Setting/setDealPass.vue?a493","webpack:///./src/pages/Setting/setDealPass.vue?26c9"],"names":["vue_esm","component","field_default","a","name","Header","setDealPass_timer","Setting_setDealPass","components","data","step","phone","validCode","password","rePassword","passwordShowed","sendCodeCD","mounted","user","this","$store","state","User","mobile","methods","showPassword","onSendCodeClicked","_this","asyncToGenerator_default","regenerator_default","mark","_callee","res","wrap","_context","prev","next","length","window","EventBus","$emit","abrupt","TextUtil","isPhoneValid","Object","API","uuid","token","sent","code","msg","startTimer","stop","_this2","setInterval","clearInterval","onNextStepClicked","onSetDealPass","_this3","_callee2","_context2","$router","replace","pages_Setting_setDealPass","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","directives","rawName","value","expression","placeholder","type","readonly","model","callback","$$v","disabled","domProps","textContent","_s","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/20.b431cab333fa68960b2d.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Vue from 'vue'\r\nimport Header from '../../components/Header'\r\nimport TextUtil from '../../utils/TextUtil'\r\nimport { sendSMSCode, requestSetFundPwd } from '../../api/API'\r\nimport { Field } from 'mint-ui'\r\nVue.component(Field.name, Field)\r\nlet timer = null\r\nexport default {\r\n  name: 'setdealpass',\r\n  components: {\r\n    Header\r\n  },\r\n  data () {\r\n    return {\r\n      step: 1,\r\n      phone: '',\r\n      validCode: '',\r\n      password: '',\r\n      rePassword: '',\r\n      passwordShowed: false,\r\n      sendCodeCD: 0\r\n    }\r\n  },\r\n  mounted () {\r\n    let user = this.$store.state.User.user || {}\r\n    this.phone = user.mobile\r\n  },\r\n  methods: {\r\n    showPassword () {\r\n      this.passwordShowed = !this.passwordShowed\r\n    },\r\n    async onSendCodeClicked () {\r\n      if (this.phone.length < 1) {\r\n        window.EventBus.$emit('globalMessage', '请输入手机号码')\r\n        return\r\n      }\r\n      if (!TextUtil.isPhoneValid(this.phone)) {\r\n        window.EventBus.$emit('globalMessage', '请输入正确的手机号码')\r\n        return\r\n      }\r\n      let res = await sendSMSCode(this.phone, this.$store.state.User.uuid, this.$store.state.User.token)\r\n      if (res.code === 200) {\r\n        window.EventBus.$emit('globalMessage', res.msg)\r\n      }\r\n      this.sendCodeCD = 60\r\n      this.startTimer()\r\n    },\r\n    startTimer () {\r\n      timer = setInterval(() => {\r\n        if (this.sendCodeCD > 0) {\r\n          this.sendCodeCD--\r\n        } else {\r\n          clearInterval(timer)\r\n        }\r\n      }, 1000)\r\n    },\r\n    onNextStepClicked () {\r\n      if (!TextUtil.isPhoneValid(this.phone)) {\r\n        window.EventBus.$emit('globalMessage', '请输入正确的手机号码')\r\n        return\r\n      }\r\n      if (!this.validCode) {\r\n        window.EventBus.$emit('globalMessage', '请输入短信验证码')\r\n        return\r\n      }\r\n      this.step = 2\r\n    },\r\n    async onSetDealPass () {\r\n      if (!this.password || !this.rePassword || (this.password !== this.rePassword)) {\r\n        window.EventBus.$emit('globalMessage', '请输入正确的密码和重复密码')\r\n        return\r\n      }\r\n      let user = this.$store.state.User || {}\r\n      let res = await requestSetFundPwd(user.token, user.uuid, this.password, this.rePassword, this.validCode)\r\n      window.EventBus.$emit('globalMessage', res.msg)\r\n      if (res.code === 200) {\r\n        this.$router.replace('setting')\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Setting/setDealPass.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mfw-page with-header page-session\"},[_c('Header',{attrs:{\"title\":\"设置交易密码\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mfw-page-section\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 1),expression:\"step === 1\"}],staticClass:\"section-content pd20\"},[_c('mt-field',{attrs:{\"placeholder\":\"请输入11位手机号\",\"type\":\"tel\",\"readonly\":\"\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"placeholder\":\"输入验证码\",\"type\":\"text\"},model:{value:(_vm.validCode),callback:function ($$v) {_vm.validCode=$$v},expression:\"validCode\"}},[_c('button',{staticClass:\"mfw-button size-sm primary btn-sendcode\",attrs:{\"disabled\":_vm.sendCodeCD > 0},domProps:{\"textContent\":_vm._s(_vm.sendCodeCD === 0 ? '发送验证码' : (_vm.sendCodeCD + \"秒后重新发送\"))},on:{\"click\":_vm.onSendCodeClicked}})])],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 2),expression:\"step === 2\"}],staticClass:\"mfw-page-section\"},[_c('div',{staticClass:\"section-content pd20\"},[_c('mt-field',{attrs:{\"placeholder\":\"请输入新的密码\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"placeholder\":\"请再次输入新的密码\",\"type\":\"password\"},model:{value:(_vm.rePassword),callback:function ($$v) {_vm.rePassword=$$v},expression:\"rePassword\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"menus\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 1),expression:\"step === 1\"}],staticClass:\"mfw-button primary round size-lg\",on:{\"click\":_vm.onNextStepClicked}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 2),expression:\"step === 2\"}],staticClass:\"mfw-button primary round size-lg\",on:{\"click\":_vm.onSetDealPass}},[_vm._v(\"设置交易密码\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-432312bc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Setting/setDealPass.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-432312bc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./setDealPass.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./setDealPass.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./setDealPass.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-432312bc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./setDealPass.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Setting/setDealPass.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}