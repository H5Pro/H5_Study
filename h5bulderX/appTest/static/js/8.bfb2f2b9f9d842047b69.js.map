{"version":3,"sources":["webpack:///./src/components/ExternalJs.vue","webpack:///./src/components/ExternalJs.vue?a591","webpack:///./src/pages/Setting/certification.vue","webpack:///./src/pages/Setting/certification.vue?ba4f","webpack:///./src/pages/Setting/certification.vue?ff29"],"names":["String","Function","components_ExternalJs","render","createElement","attrs","type","src","this","ref","props","loadReady","mounted","_t","$refs","externalJs","onload","Component","__webpack_require__","normalizeComponent","__webpack_exports__","vue_esm","component","field_default","a","name","Header","ExternalJs","certification_base_img","Setting_certification","components","VueCropper","e","then","bind","data","user_name","id_card","img_flag","id_card_front_img","id_card_back_img","headPortrait","show","img","info","size","outputType","autoCropWidth","autoCropHeight","canScale","autoCrop","showToast","toastTaxt","getAuthInfo","methods","_this","asyncToGenerator_default","regenerator_default","mark","_callee","res","userInfo","wrap","_context","prev","next","Object","API","$store","state","User","token","sent","code","user_info","real_name","card_id","img_1","img_1_content","img_2","img_2_content","stop","windowWidthHeight","winWidth","winHeight","window","innerWidth","document","documentElement","clientWidth","innerHeight","clientHeight","w","h","chooseImg","flag","canvasResize","getElementById","click","getImg","elem","_this2","file","srcElement","files","test","toast","fileToDataURL","url","callback","reader","FileReader","quality","width","height","winWH","rW","rH","style","readAsDataURL","selectImg","_this3","cropper","getCropData","cancelCrop","value","dataURLtoFile","dataurl","fileName","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","onSave","_this4","_callee2","user","_user","_context2","abrupt","EventBus","$emit","id_certify_flag","commit","msg","pages_Setting_certification","_vm","_h","$createElement","_c","_self","staticClass","title","_v","label","placeholder","model","$$v","expression","on","$event","directives","rawName","staticStyle","display","accept","id","change","outputSize","fixed","staticRenderFns","ssrContext"],"mappings":"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","file":"static/js/8.bfb2f2b9f9d842047b69.js","sourcesContent":["\nexport default {\n  render (createElement) {\n    return createElement(\n      'script',\n      {\n        attrs: {type: 'text/javascript', src: this.src},\n        ref: 'externalJs'\n      }\n    )\n  },\n  props: {\n    src: {type: String},\n    loadReady: {type: Function}\n  },\n  mounted () {\n    var _t = this\n    this.$refs.externalJs.onload = function () {\n      if (_t.loadReady) {\n        _t.loadReady()\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ExternalJs.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ExternalJs.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ExternalJs.vue\"\n/* template */\nvar __vue_template__ = null\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ExternalJs.vue\n// module id = null\n// module chunks = ","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Vue from 'vue'\r\nimport { requestRealAuth, requestRealAuthInfo } from '@/api/API'\r\nimport Header from '../../components/Header'\r\nimport externalJs from '../../components/ExternalJs'\r\nimport { Field } from 'mint-ui'\r\nVue.component(Field.name, Field)\r\nlet base_img = '/static/img/profile/icon-user-default@2x.png'\r\nexport default {\r\n  components: {\r\n    Header,\r\n    externalJs,\r\n    VueCropper: () => import('../../components/vue-cropper')\r\n  },\r\n  data () {\r\n    return {\r\n      user_name: '',\r\n      id_card: '',\r\n      img_flag: null,\r\n      id_card_front_img: base_img,\r\n      id_card_back_img: base_img,\r\n      headPortrait: {\r\n        show: false,\r\n        img: '',\r\n        info: false,\r\n        size: 1,\r\n        outputType: 'jpg',\r\n        autoCropWidth: 200,\r\n        autoCropHeight: 200,\r\n        canScale: false,\r\n        autoCrop: true,\r\n        showToast: false,\r\n        toastTaxt: '图片加载中...'\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getAuthInfo()\r\n  },\r\n  methods: {\r\n    async getAuthInfo () {\r\n      let res = await requestRealAuthInfo(this.$store.state.User.token)\r\n      if (res.code === 200) {\r\n        let userInfo = res.data.user_info || {}\r\n        this.user_name = userInfo.real_name || ''\r\n        this.id_card = userInfo.card_id || ''\r\n        this.id_card_front_img = userInfo.img_1 ? ('data:image/png;base64,' + userInfo.img_1_content) : base_img\r\n        this.id_card_back_img = userInfo.img_2 ? ('data:image/png;base64,' + userInfo.img_2_content) : base_img\r\n      }\r\n    },\r\n    windowWidthHeight () {\r\n      let winWidth, winHeight\r\n      if (window.innerWidth) {\r\n        winWidth = window.innerWidth\r\n      } else if (document.documentElement.clientWidth) {\r\n        winWidth = document.documentElement.clientWidth\r\n      }\r\n      if (window.innerHeight) {\r\n        winHeight = window.innerHeight\r\n      } else if (document.documentElement.clientHeight) {\r\n        winHeight = document.documentElement.clientHeight\r\n      }\r\n      return {\r\n        w: winWidth,\r\n        h: winHeight\r\n      }\r\n    },\r\n    chooseImg (flag) {\r\n      this.img_flag = flag\r\n      if (window.canvasResize !== 'undefined') {\r\n        document.getElementById('uploadImgBtn').click()\r\n      }\r\n    },\r\n    getImg (elem) {\r\n      let file = elem.srcElement.files[0]\r\n      this.headPortrait.toastTaxt = '图片正在加载...'\r\n      this.headPortrait.showToast = true\r\n      if (!/\\.(jpg|jpeg|png|JPG|PNG)$/.test(file.name)) {\r\n        this.headPortrait.showToast = false\r\n        this.toast('文件类型必须是jpeg,jpg,png中的一种')\r\n        return false\r\n      }\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        this.headPortrait.showToast = false\r\n        this.toast('图片大小不能超过5M')\r\n        return false\r\n      }\r\n      this.fileToDataURL(file, url => {\r\n        this.headPortrait.showToast = false\r\n        this.headPortrait.img = url\r\n        this.headPortrait.show = true\r\n      })\r\n    },\r\n    fileToDataURL (file, callback) {\r\n      let reader = new window.FileReader()\r\n      let _t = this\r\n      reader.onload = function (e) {\r\n        window.canvasResize(file, {\r\n          quality: 80,\r\n          callback: function (data, width, height) {\r\n            let winWH = _t.windowWidthHeight()\r\n            let rW, rH\r\n            winWH.h = winWH.h - 80\r\n            if (width / height > winWH.w / winWH.h) {\r\n              if (width < winWH.w) {\r\n                document.getElementById('crop-container2').style.width = width + 'px'\r\n                document.getElementById('crop-container2').style.height = height + 'px'\r\n                rW = width\r\n                rH = height\r\n              } else {\r\n                let h = winWH.w / width * height\r\n                document.getElementById('crop-container2').style.height = h + 'px'\r\n                rW = winWH.w\r\n                rH = h\r\n              }\r\n            }\r\n            if (width / height < winWH.w / winWH.h) {\r\n              if (height < winWH.h) {\r\n                document.getElementById('crop-container2').style.width = width + 'px'\r\n                document.getElementById('crop-container2').style.height = height + 'px'\r\n                rW = width\r\n                rH = height\r\n              } else {\r\n                let w = winWH.h / height * width\r\n                document.getElementById('crop-container2').style.width = w + 'px'\r\n                rW = w\r\n                rH = winWH.h\r\n              }\r\n            }\r\n            if (rW < 200 || rH < 200) {\r\n              if (rW < rH) {\r\n                _t.headPortrait.autoCropWidth = _t.headPortrait.autoCropHeight = rW\r\n              } else {\r\n                _t.headPortrait.autoCropWidth = _t.headPortrait.autoCropHeight = rH\r\n              }\r\n            }\r\n\r\n            callback(data)\r\n            _t.headPortrait.showToast = false\r\n          }\r\n        })\r\n      }\r\n      reader.readAsDataURL(file)\r\n    },\r\n    selectImg () {\r\n      this.$refs.cropper.getCropData(data => {\r\n        if (this.img_flag === 1) {\r\n          this.id_card_front_img = data\r\n        } else {\r\n          this.id_card_back_img = data\r\n        }\r\n        this.cancelCrop()\r\n      })\r\n    },\r\n    cancelCrop () {\r\n      this.headPortrait.show = false\r\n      document.getElementById('uploadImgBtn').value = ''\r\n      this.headPortrait.autoCropWidth = this.headPortrait.autoCropHeight = 200\r\n      document.getElementById('crop-container2').style.width = '100%'\r\n    },\r\n    dataURLtoFile (dataurl, fileName) {\r\n      let arr = dataurl.split(',')\r\n      let mime = arr[0].match(/:(.*?);/)[1]\r\n      let bstr = atob(arr[1])\r\n      let n = bstr.length\r\n      let u8arr = new Uint8Array(n)\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n)\r\n      }\r\n      return new File([u8arr], fileName, { type: mime })\r\n    },\r\n    async onSave () {\r\n      if (!this.user_name) {\r\n        return window.EventBus.$emit('globalMessage', '请填写姓名')\r\n      }\r\n      if (!this.id_card) {\r\n        return window.EventBus.$emit('globalMessage', '请填写身份证号')\r\n      }\r\n      if (!this.id_card_front_img || this.id_card_front_img === base_img) {\r\n        return window.EventBus.$emit('globalMessage', '请选择身份证正面照')\r\n      }\r\n      if (!this.id_card_back_img || this.id_card_back_img === base_img) {\r\n        return window.EventBus.$emit('globalMessage', '请选择身份证反面照')\r\n      }\r\n      let user = this.$store.state.User || {}\r\n      let img_1 = this.dataURLtoFile(this.id_card_front_img, 'img_1.png')\r\n      let img_2 = this.dataURLtoFile(this.id_card_back_img, 'img_2.png')\r\n      let res = await requestRealAuth(user.token, this.user_name, this.id_card, img_1, img_2)\r\n      if (res.code === 200) {\r\n        let user = this.$store.state.User.user\r\n        user.id_certify_flag = '1'\r\n        this.$store.commit('User/updateUser', user)\r\n      }\r\n      return window.EventBus.$emit('globalMessage', res.msg)\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Setting/certification.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mfw-page with-header\"},[_c('Header',{attrs:{\"title\":\"实名认证\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mfw-page-section\"},[_c('div',{staticClass:\"section-content\"},[_c('mt-field',{staticClass:\"border-bottom\",attrs:{\"label\":\"姓名\",\"placeholder\":\"请输入姓名\"},model:{value:(_vm.user_name),callback:function ($$v) {_vm.user_name=$$v},expression:\"user_name\"}}),_vm._v(\" \"),_c('mt-field',{staticClass:\"border-bottom\",attrs:{\"label\":\"身份证\",\"placeholder\":\"请输入身份证号\"},model:{value:(_vm.id_card),callback:function ($$v) {_vm.id_card=$$v},expression:\"id_card\"}}),_vm._v(\" \"),_c('div',{staticClass:\"border-bottom div-id-card\"},[_c('div',{staticClass:\"id-card-img-title\"},[_vm._v(\"身份证正面照\")]),_vm._v(\" \"),_c('div',{staticClass:\"card-img\",on:{\"click\":function($event){_vm.chooseImg(1)}}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.id_card_front_img !== '/static/img/profile/icon-user-default@2x.png'),expression:\"id_card_front_img !== '/static/img/profile/icon-user-default@2x.png'\"}],attrs:{\"src\":_vm.id_card_front_img}})])]),_vm._v(\" \"),_c('div',{staticClass:\"border-bottom div-id-card\"},[_c('div',{staticClass:\"id-card-img-title\"},[_vm._v(\"身份证反面照\")]),_vm._v(\" \"),_c('div',{staticClass:\"card-img\",on:{\"click\":function($event){_vm.chooseImg(2)}}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.id_card_back_img !== '/static/img/profile/icon-user-default@2x.png'),expression:\"id_card_back_img !== '/static/img/profile/icon-user-default@2x.png'\"}],attrs:{\"src\":_vm.id_card_back_img}})])])],1),_vm._v(\" \"),_c('div',{staticClass:\"mt20\"},[_c('button',{staticClass:\"mfw-button primary round size-lg\",on:{\"click\":_vm.onSave}},[_vm._v(\"保存\")])])]),_vm._v(\" \"),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/jpg,image/jpeg,image/png\",\"id\":\"uploadImgBtn\"},on:{\"change\":function($event){_vm.getImg($event)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.headPortrait.show),expression:\"headPortrait.show\"}],staticClass:\"head-portrait\"},[_c('div',{staticClass:\"crop-header\"},[_c('span',{staticClass:\"goback icon icon-back\",on:{\"click\":_vm.cancelCrop}},[_c('em',{staticClass:\"arrow-l big dark2\"})]),_vm._v(\" \"),_c('span',{staticClass:\"page-name\"},[_vm._v(\"图片剪裁\")])]),_vm._v(\" \"),_c('div',{staticClass:\"crop-container\"},[_c('div',{staticClass:\"crop-container2\",attrs:{\"id\":\"crop-container2\"}},[_c('vueCropper',{ref:\"cropper\",attrs:{\"img\":_vm.headPortrait.img,\"outputSize\":_vm.headPortrait.size,\"outputType\":_vm.headPortrait.outputType,\"info\":_vm.headPortrait.info,\"autoCropWidth\":_vm.headPortrait.autoCropWidth,\"autoCropHeight\":_vm.headPortrait.autoCropHeight,\"canScale\":_vm.headPortrait.canScale,\"autoCrop\":_vm.headPortrait.autoCrop,\"fixed\":true}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"crop-btn\"},[_c('span',{staticClass:\"cancel\",on:{\"click\":_vm.cancelCrop}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('span',{staticClass:\"commit\",on:{\"click\":_vm.selectImg}},[_vm._v(\"选择\")])])]),_vm._v(\" \"),_c('external-js',{attrs:{\"src\":'/static/js/canvas_resize/b-exif-canvasResize.min.js'}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e53ca4e6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Setting/certification.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e53ca4e6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./certification.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./certification.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./certification.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e53ca4e6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./certification.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e53ca4e6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Setting/certification.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}