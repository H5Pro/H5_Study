{"version":3,"sources":["webpack:///./src/components/vue-cropper/index.js","webpack:///./src/components/vue-cropper/vue-cropper.vue","webpack:///./src/components/vue-cropper/vue-cropper.vue?6d01","webpack:///./src/components/vue-cropper/vue-cropper.vue?89e1"],"names":["vueCropper","__webpack_require__","module","exports","String","Number","Boolean","Array","vue_cropper_vue_cropper","data","w","h","scale","x","y","loading","trueWidth","trueHeight","move","moveX","moveY","crop","cropping","cropW","cropH","cropOldW","cropOldH","canChangeX","canChangeY","changeCropTypeX","changeCropTypeY","cropX","cropY","cropChangeX","cropChangeY","cropOffsertX","cropOffsertY","support","props","img","type","default","outputSize","outputType","info","canScale","autoCrop","autoCropWidth","autoCropHeight","fixed","fixedNumber","computed","cropInfo","this","watch","_this","clearCrop","$refs","cropperImg","onload","reload","showPreview","methods","startMove","e","window","addEventListener","moveImg","leaveImg","clientX","touches","clientY","createCrop","endCrop","offsetX","pageX","cropper","offsetLeft","offsetY","pageY","offsetTop","_this2","preventDefault","nowX","nowY","$nextTick","removeEventListener","scaleImg","document","createElement","undefined","onmousewheel","changeSize","cancleScale","deltaY","_this3","fw","fh","Math","abs","fixedHeight","changeCropSize","typeW","typeH","changeCropNow","changeCropEnd","_this4","fixedWidth","startCrop","stopCrop","cropMove","moveCrop","leaveCrop","_this5","getCropData","cb","_this6","canvas","width","height","Image","ctx","getContext","dx","dy","drawImage","toDataURL","src","getCropBlob","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","URL","createObjectURL","Blob","obj","div","transform","$emit","_this7","getComputedStyle","replace","goAutoCrop","changeCrop","refresh","mounted","_this8","components_vue_cropper_vue_cropper","render","_vm","_h","$createElement","_c","_self","ref","staticClass","directives","name","rawName","value","expression","style","attrs","alt","_v","class","cropper-move","cropper-crop","cropper-modal","on","mousedown","touchstart","mouseover","mouseout","top","_s","_e","$event","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/27.abf1e44f76141e7dd4dd.js","sourcesContent":["var vueCropper = require('./vue-cropper')\r\n\r\nmodule.exports = vueCropper\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vue-cropper/index.js","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data: function () {\n    return {\n      // 容器高宽\n      w: 0,\n      h: 0,\n      // 图片缩放比例\n      scale: 1,\n      // 图片偏移x轴\n      x: 0,\n      // 图片偏移y轴\n      y: 0,\n      // 图片加载\n      loading: true,\n      // 图片真实宽度\n      trueWidth: 0,\n      // 图片真实高度\n      trueHeight: 0,\n      // 是否可以拖动图片\n      move: true,\n      // 移动的x\n      moveX: 0,\n      // 移动的y\n      moveY: 0,\n      // 开启截图\n      crop: false,\n      // 正在截图\n      cropping: false,\n      // 裁剪框大小\n      cropW: 0,\n      cropH: 0,\n      cropOldW: 0,\n      cropOldH: 0,\n      // 判断是否能够改变\n      canChangeX: false,\n      canChangeY: false,\n      // 改变的基准点\n      changeCropTypeX: 1,\n      changeCropTypeY: 1,\n      // 裁剪框的坐标轴\n      cropX: 0,\n      cropY: 0,\n      cropChangeX: 0,\n      cropChangeY: 0,\n      cropOffsertX: 0,\n      cropOffsertY: 0,\n      // 支持的滚动事件\n      support: ''\n    }\n  },\n  props: {\n    img: {\n      type: String,\n      default: ''\n    },\n    // 输出图片压缩比\n    outputSize: {\n      type: Number,\n      default: 1\n    },\n    outputType: {\n      type: String,\n      default: 'jpeg'\n    },\n    info: {\n      type: Boolean,\n      default: true\n    },\n    // 是否开启滚轮放大缩小\n    canScale: {\n      type: Boolean,\n      default: true\n    },\n    // 是否自成截图框\n    autoCrop: {\n      type: Boolean,\n      default: false\n    },\n    autoCropWidth: {\n      type: Number,\n      default: 0\n    },\n    autoCropHeight: {\n      type: Number,\n      default: 0\n    },\n    // 是否开启固定宽高比\n    fixed: {\n      type: Boolean,\n      default: false\n    },\n    // 宽高比 w/h\n    fixedNumber: {\n      type: Array,\n      default: () => {\n        return [1, 1]\n      }\n    }\n  },\n  computed: {\n    cropInfo () {\n      return this.cropOffsertY > 20 ? '-20px' : '0px'\n    }\n  },\n  watch: {\n    // 如果图片改变， 重新布局\n    img () {\n      this.loading = true\n      this.scale = 1\n      this.clearCrop()\n      this.$refs.cropperImg.onload = () => {\n        // 图片加载成功后布局\n        this.reload()\n      }\n    },\n\n    cropW () {\n      this.showPreview()\n    },\n    cropH () {\n      this.showPreview()\n    },\n    cropOffsertX () {\n      this.showPreview()\n    },\n    cropOffsertY () {\n      this.showPreview()\n    },\n    scale () {\n      this.showPreview()\n    },\n    x () {\n      this.showPreview()\n    },\n    y () {\n      this.showPreview()\n    }\n  },\n  methods: {\n    // 当按下鼠标键\n    startMove (e) {\n      // 如果move 为true 表示当前可以拖动\n      if (this.move && !this.crop) {\n        // 开始移动\n        window.addEventListener('mousemove', this.moveImg)\n        window.addEventListener('mouseup', this.leaveImg)\n        window.addEventListener('touchmove', this.moveImg)\n        window.addEventListener('touchend', this.leaveImg)\n        this.moveX = (e.clientX ? e.clientX : e.touches[0].clientX) - this.x\n        this.moveY = (e.clientY ? e.clientY : e.touches[0].clientY) - this.y\n      } else {\n        // 截图ing\n        this.cropping = true\n        // 绑定截图事件\n        window.addEventListener('mousemove', this.createCrop)\n        window.addEventListener('mouseup', this.endCrop)\n        window.addEventListener('touchmove', this.createCrop)\n        window.addEventListener('touchend', this.endCrop)\n        this.cropOffsertX = e.offsetX ? e.offsetX : (e.touches[0].pageX - this.$refs.cropper.offsetLeft)\n        this.cropOffsertY = e.offsetY ? e.offsetY : (e.touches[0].pageY - this.$refs.cropper.offsetTop)\n        this.cropX = e.clientX ? e.clientX : e.touches[0].clientX\n        this.cropY = e.clientY ? e.clientY : e.touches[0].clientY\n        this.cropChangeX = this.cropOffsertX\n        this.cropChangeY = this.cropOffsertY\n        this.cropW = 0\n        this.cropH = 0\n      }\n    },\n    // 移动图片\n    moveImg (e) {\n      e.preventDefault()\n      var nowX = e.clientX ? e.clientX : e.touches[0].clientX\n      var nowY = e.clientY ? e.clientY : e.touches[0].clientY\n      this.$nextTick(() => {\n        this.x = ~~(nowX - this.moveX)\n        this.y = ~~(nowY - this.moveY)\n      })\n    },\n    // 移动图片结束\n    leaveImg (e) {\n      window.removeEventListener('mousemove', this.moveImg)\n      window.removeEventListener('touchmove', this.moveImg)\n      window.removeEventListener('mouseup', this.leaveImg)\n      window.removeEventListener('touchend', this.leaveImg)\n    },\n    // 缩放图片\n    scaleImg () {\n      this.support = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : document.onmousewheel !== undefined ? \"mousewheel\" : \"DOMMouseScroll\"\n      if (this.canScale) {\n        window.addEventListener(this.support, this.changeSize)\n      }\n    },\n    // 移出框\n    cancleScale () {\n      if (this.canScale) {\n        window.removeEventListener(this.support, this.changeSize)\n      }\n    },\n    // 改变大小函数\n    changeSize (e) {\n      let change = e.deltaY\n      if (change < 0) {\n        this.scale += 0.05\n      } else if (this.scale > 0.05) {\n        this.scale -= 0.05\n      }\n      // change < 0 ? this.scale += 0.05 : this.scale > 0.05 ? this.scale -= 0.05 : this.scale\n      e.preventDefault()\n    },\n\n    // 创建截图框\n    createCrop (e) {\n      e.preventDefault()\n      // 移动生成大小\n      var nowX = e.clientX ? e.clientX : e.touches ? e.touches[0].clientX : 0\n      var nowY = e.clientY ? e.clientY : e.touches ? e.touches[0].clientY : 0\n      this.$nextTick(() => {\n        var fw = ~~(nowX - this.cropX)\n        var fh = ~~(nowY - this.cropY)\n        if (fw > 0) {\n          this.cropW = fw + this.cropChangeX > this.w ? this.w - this.cropChangeX : fw\n          this.cropOffsertX = this.cropChangeX\n        } else {\n          this.cropW = (this.w - this.cropChangeX + Math.abs(fw)) > this.w ? this.cropChangeX : Math.abs(fw)\n          this.cropOffsertX = this.cropChangeX + fw > 0 ? this.cropChangeX + fw : 0\n        }\n\n        if (!this.fixed) {\n          if (fh > 0) {\n            this.cropH = fh + this.cropChangeY > this.h ? this.h - this.cropChangeY : fh\n            this.cropOffsertY = this.cropChangeY\n          } else {\n            this.cropH = (this.h - this.cropChangeY + Math.abs(fh)) > this.h ? this.cropChangeY : Math.abs(fh)\n            this.cropOffsertY = this.cropChangeY + fh > 0 ? this.cropChangeY + fh : 0\n          }\n        } else {\n          var fixedHeight = ~~(this.cropW / this.fixedNumber[0] * this.fixedNumber[1])\n          if (fixedHeight + this.cropOffsertY > this.h) {\n            this.cropH = this.h - this.cropOffsertY\n            this.cropW = ~~(this.cropH / this.fixedNumber[1] * this.fixedNumber[0])\n            if (fw > 0) {\n              this.cropOffsertX = this.cropChangeX\n            } else {\n              this.cropOffsertX = this.cropChangeX - this.cropW\n            }\n          } else {\n            this.cropH = fixedHeight\n          }\n          this.cropOffsertY = this.cropOffsertY\n        }\n      })\n    },\n\n    // 改变截图框大小\n    changeCropSize (e, w, h, typeW, typeH) {\n      window.addEventListener('mousemove', this.changeCropNow)\n      window.addEventListener('mouseup', this.changeCropEnd)\n      window.addEventListener('touchmove', this.changeCropNow)\n      window.addEventListener('touchend', this.changeCropEnd)\n      this.canChangeX = w\n      this.canChangeY = h\n      this.changeCropTypeX = typeW\n      this.changeCropTypeY = typeH\n      this.cropX = e.clientX ? e.clientX : e.touches[0].clientX\n      this.cropY = e.clientY ? e.clientY : e.touches[0].clientY\n      this.cropOldW = this.cropW\n      this.cropOldH = this.cropH\n      this.cropChangeX = this.cropOffsertX\n      this.cropChangeY = this.cropOffsertY\n      if (this.fixed) {\n        if (this.canChangeX && this.canChangeY) {\n          this.canChangeY = 0\n        }\n      }\n    },\n\n    // 正在改变\n    changeCropNow (e) {\n      e.preventDefault()\n      var nowX = e.clientX ? e.clientX : e.touches ? e.touches[0].clientX : 0\n      var nowY = e.clientY ? e.clientY : e.touches ? e.touches[0].clientY : 0\n      this.$nextTick(() => {\n        var fw = ~~(nowX - this.cropX)\n        var fh = ~~(nowY - this.cropY)\n        if (this.canChangeX) {\n          if (this.changeCropTypeX === 1) {\n            if (this.cropOldW - fw > 0) {\n              this.cropW = this.w - this.cropChangeX - fw <= this.w ? this.cropOldW - fw : this.cropOldW + this.cropChangeX\n              this.cropOffsertX = this.w - this.cropChangeX - fw <= this.w ? this.cropChangeX + fw : 0\n            } else {\n              this.cropW = Math.abs(fw) + this.cropChangeX <= this.w ? Math.abs(fw) - this.cropOldW : this.w - this.cropOldW - this.cropChangeX\n              this.cropOffsertX = this.cropChangeX + this.cropOldW\n            }\n          } else if (this.changeCropTypeX === 2) {\n            if (this.cropOldW + fw > 0) {\n              this.cropW = this.cropOldW + fw + this.cropOffsertX <= this.w ? this.cropOldW + fw : this.w - this.cropOffsertX\n              this.cropOffsertX = this.cropChangeX\n            } else {\n              this.cropW = (this.w - this.cropChangeX + Math.abs(fw + this.cropOldW)) <= this.w ? Math.abs(fw + this.cropOldW) : this.cropChangeX\n              this.cropOffsertX = (this.w - this.cropChangeX + Math.abs(fw + this.cropOldW)) <= this.w ? this.cropChangeX - Math.abs(fw + this.cropOldW) : 0\n            }\n          }\n        }\n\n        if (this.canChangeY) {\n          if (this.changeCropTypeY === 1) {\n            if (this.cropOldH - fh > 0) {\n              this.cropH = this.h - this.cropChangeY - fh <= this.h ? this.cropOldH - fh : this.cropOldH + this.cropChangeY\n              this.cropOffsertY = this.h - this.cropChangeY - fh <= this.h ? this.cropChangeY + fh : 0\n            } else {\n              this.cropH = Math.abs(fh) + this.cropChangeY <= this.h ? Math.abs(fh) - this.cropOldH : this.h - this.cropOldH - this.cropChangeY\n              this.cropOffsertY = this.cropChangeY + this.cropOldH\n            }\n          } else if (this.changeCropTypeY === 2) {\n            if (this.cropOldH + fh > 0) {\n              this.cropH = this.cropOldH + fh + this.cropOffsertY <= this.h ? this.cropOldH + fh : this.h - this.cropOffsertY\n              this.cropOffsertY = this.cropChangeY\n            } else {\n              this.cropH = (this.h - this.cropChangeY + Math.abs(fh + this.cropOldH)) <= this.h ? Math.abs(fh + this.cropOldH) : this.cropChangeY\n              this.cropOffsertY = (this.h - this.cropChangeY + Math.abs(fh + this.cropOldH)) <= this.h ? this.cropChangeY - Math.abs(fh + this.cropOldH) : 0\n            }\n          }\n        }\n\n        if (this.canChangeX && this.fixed) {\n          var fixedHeight = ~~(this.cropW / this.fixedNumber[0] * this.fixedNumber[1])\n          if (fixedHeight + this.cropOffsertY > this.h) {\n            this.cropH = this.h - this.cropOffsertY\n            this.cropW = ~~(this.cropH / this.fixedNumber[1] * this.fixedNumber[0])\n          } else {\n            this.cropH = fixedHeight\n          }\n        }\n\n        if (this.canChangeY && this.fixed) {\n          var fixedWidth = ~~(this.cropH / this.fixedNumber[1] * this.fixedNumber[0])\n          if (fixedWidth + this.cropOffsertX > this.w) {\n            this.cropW = this.w - this.cropOffsertX\n            this.cropH = ~~(this.cropW / this.fixedNumber[0] * this.fixedNumber[1])\n          } else {\n            this.cropW = fixedWidth\n          }\n        }\n      })\n    },\n\n    // 结束改变\n    changeCropEnd (e) {\n      window.removeEventListener('mousemove', this.changeCropNow)\n      window.removeEventListener('mouseup', this.changeCropEnd)\n      window.removeEventListener('touchmove', this.changeCropNow)\n      window.removeEventListener('touchend', this.changeCropEnd)\n    },\n\n    // 创建完成\n    endCrop () {\n      if (this.cropW === 0 && this.cropH === 0) {\n        this.cropping = false\n      }\n      window.removeEventListener('mousemove', this.createCrop)\n      window.removeEventListener('mouseup', this.endCrop)\n      window.removeEventListener('touchmove', this.createCrop)\n      window.removeEventListener('touchend', this.endCrop)\n    },\n    // 开始截图\n    startCrop () {\n      this.crop = true\n      // console.log('开始截图')\n    },\n    // 停止截图\n    stopCrop () {\n      this.crop = false\n      // console.log('停止截图')\n    },\n    // 清除截图\n    clearCrop () {\n      this.cropping = false\n      this.cropW = 0\n      this.cropH = 0\n      // console.log('清除截图')\n    },\n    // 截图移动\n    cropMove (e) {\n      window.addEventListener('mousemove', this.moveCrop)\n      window.addEventListener('mouseup', this.leaveCrop)\n      window.addEventListener('touchmove', this.moveCrop)\n      window.addEventListener('touchend', this.leaveCrop)\n      this.cropX = (e.clientX ? e.clientX : e.touches[0].clientX) - this.cropOffsertX\n      this.cropY = (e.clientY ? e.clientY : e.touches[0].clientY) - this.cropOffsertY\n    },\n\n    moveCrop (e) {\n      e.preventDefault()\n      var nowX = e.clientX ? e.clientX : e.touches[0].clientX\n      var nowY = e.clientY ? e.clientY : e.touches[0].clientY\n      this.$nextTick(() => {\n        var fw = ~~(nowX - this.cropX)\n        var fh = ~~(nowY - this.cropY)\n        if (fw <= 1) {\n          this.cropOffsertX = 1\n        } else if (~~(fw + this.cropW) > this.w) {\n          this.cropOffsertX = this.w - this.cropW - 1\n        } else {\n          this.cropOffsertX = fw\n        }\n\n        if (fh <= 1) {\n          this.cropOffsertY = 1\n        } else if (~~(fh + this.cropH) > this.h) {\n          this.cropOffsertY = this.h - this.cropH - 1\n        } else {\n          this.cropOffsertY = fh\n        }\n      })\n    },\n\n    leaveCrop (e) {\n      window.removeEventListener('mousemove', this.moveCrop)\n      window.removeEventListener('mouseup', this.leaveCrop)\n      window.removeEventListener('touchmove', this.moveCrop)\n      window.removeEventListener('touchend', this.leaveCrop)\n    },\n    // 获取转换成base64 的图片信息\n    getCropData (cb) {\n      let canvas = document.createElement('canvas')\n      canvas.width = this.cropW\n      canvas.height = this.cropH\n      let img = new Image()\n      img.onload = () => {\n        if (~~(canvas.width) !== 0) {\n          let ctx = canvas.getContext('2d')\n          // 图片x轴偏移\n          let dx = (this.x - this.cropOffsertX) + this.trueWidth * (1 - this.scale) / 2\n          // 图片y轴偏移\n          let dy = (this.y - this.cropOffsertY) + this.trueHeight * (1 - this.scale) / 2\n          // console.log(dx, dy)\n          ctx.drawImage(img, dx, dy, this.trueWidth * this.scale, this.trueHeight * this.scale)\n        } else {\n          canvas.width = this.trueWidth * this.scale\n          canvas.height = this.trueHeight * this.scale\n          let ctx = canvas.getContext('2d')\n          ctx.drawImage(img, 0, 0, this.trueWidth * this.scale, this.trueHeight * this.scale)\n        }\n        let data = canvas.toDataURL('image/' + this.outputType, this.outputSize)\n        cb(data)\n      }\n      //img.crossOrigin = 'anonymous'\n      img.src = this.img\n    },\n    //转化base64 为blob对象\n    getCropBlob (cb) {\n      this.getCropData((data) => {\n        var arr = data.split(',')\n        var mime = arr[0].match(/:(.*?);/)[1]\n        var bstr = atob(arr[1])\n        var n = bstr.length\n        var u8arr = new Uint8Array(n)\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n)\n        }\n        cb(\n          window.URL.createObjectURL(new Blob([u8arr], {\n            type: mime})\n          ))\n      })\n    },\n\n    // 自动预览函数\n    showPreview () {\n      var obj = {}\n      obj.div = {\n        'width': this.cropW + 'px',\n        'height': this.cropH + 'px'\n      }\n      obj.img = {\n        'width': this.trueWidth + 'px',\n        'height': this.trueHeight + 'px',\n        'transform': 'scale(' + this.scale + ',' + this.scale + ') ' + 'translate3d(' + (this.x - this.cropOffsertX) / this.scale + 'px,' + (this.y - this.cropOffsertY) / this.scale + 'px,' + '0)'\n      }\n      obj.w = this.cropW\n      obj.h = this.cropH\n      this.$emit('realTime', obj)\n    },\n    // reload 图片布局函数\n    reload () {\n      // 得到外层容器的宽度高度\n      this.w = ~~(window.getComputedStyle(this.$refs.cropper).width.replace('px', ''))\n      this.h = ~~(window.getComputedStyle(this.$refs.cropper).height.replace('px', ''))\n\n      // 存入图片真实高度\n      this.trueWidth = this.$refs.cropperImg.width\n      this.trueHeight = this.$refs.cropperImg.height\n\n      if (this.trueWidth > this.w) {\n        // 如果图片宽度大于容器宽度\n        this.scale = this.w / this.trueWidth\n      }\n\n      if (this.trueHeight * this.scale > this.h) {\n        this.scale = this.h / this.trueHeight\n      }\n\n      this.$nextTick(() => {\n        this.x = -(this.trueWidth - this.trueWidth * this.scale) / 2 + (this.w - this.trueWidth * this.scale) / 2\n        this.y = -(this.trueHeight - this.trueHeight * this.scale) / 2 + (this.h - this.trueHeight * this.scale) / 2\n        this.loading = false\n        // 获取是否开启了自动截图\n        if (this.autoCrop) {\n          this.goAutoCrop()\n        }\n      })\n    },\n    // 自动截图函数\n    goAutoCrop () {\n      this.cropping = true\n      // 截图框默认大小\n      // 如果为0 那么计算容器大小 默认为80%\n      var w = this.autoCropWidth\n      var h = this.autoCropHeight\n      if (w === 0 || h === 0) {\n        w = this.w * 0.8\n        h = this.h * 0.8\n      }\n      w = w > this.w ? this.w : w\n      h = h > this.h ? this.h : h\n      // 如果设置了比例\n      if (this.fixed) {\n        h = w / this.fixedNumber[0] * this.fixedNumber[1]\n      }\n      this.changeCrop(w, h)\n    },\n    // 手动改变截图框大小函数\n    changeCrop (w, h) {\n      this.cropW = w\n      this.cropH = h\n      // 居中走一走\n      this.cropOffsertX = (this.w - w) / 2\n      this.cropOffsertY = (this.h - h) / 2\n    },\n    // 重置函数， 恢复组件置初始状态\n    refresh () {\n      // console.log('refresh')\n    }\n  },\n  mounted () {\n    this.showPreview()\n    this.$refs.cropperImg.onload = () => {\n      // 图片加载成功后布局\n      this.reload()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vue-cropper/vue-cropper.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"cropper\",staticClass:\"vue-cropper\"},[_c('div',{staticClass:\"cropper-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading),expression:\"!loading\"}],staticClass:\"cropper-box-canvas\",style:({'width': _vm.trueWidth + 'px', 'height': _vm.trueHeight + 'px', 'transform': 'scale(' + _vm.scale + ',' + _vm.scale + ') ' + 'translate3d('+ _vm.x / _vm.scale + 'px,' + _vm.y / _vm.scale + 'px,' + '0)'})},[_c('img',{ref:\"cropperImg\",attrs:{\"src\":_vm.img,\"alt\":\"cropper-img\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"cropper-drag-box\",class:{'cropper-move': _vm.move && !_vm.crop, 'cropper-crop': _vm.crop, 'cropper-modal': _vm.cropping},on:{\"mousedown\":_vm.startMove,\"touchstart\":_vm.startMove,\"mouseover\":_vm.scaleImg,\"mouseout\":_vm.cancleScale}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cropping),expression:\"cropping\"}],staticClass:\"cropper-crop-box\",style:({\n      'width': _vm.cropW + 'px',\n      'height': _vm.cropH + 'px',\n      'transform': 'translate3d('+ _vm.cropOffsertX + 'px,' + _vm.cropOffsertY + 'px,' + '0)'\n   })},[_c('span',{staticClass:\"cropper-view-box\"},[_c('img',{style:({\n        'width': _vm.trueWidth + 'px',\n        'height': _vm.trueHeight + 'px',\n        'transform': 'scale(' + _vm.scale + ',' + _vm.scale + ') ' + 'translate3d('+ (_vm.x - _vm.cropOffsertX) / _vm.scale  + 'px,' + (_vm.y - _vm.cropOffsertY) / _vm.scale + 'px,' + '0)'}),attrs:{\"src\":_vm.img,\"alt\":\"cropper-img\"}})]),_vm._v(\" \"),_c('span',{staticClass:\"cropper-face cropper-move\",on:{\"mousedown\":_vm.cropMove,\"touchstart\":_vm.cropMove}}),_vm._v(\" \"),(_vm.info)?_c('span',{staticClass:\"crop-info\",style:({'top': _vm.cropInfo})},[_vm._v(_vm._s(this.cropW)+\" × \"+_vm._s(this.cropH))]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"crop-line line-w\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, false, true, 0, 1)},\"touchstart\":function($event){_vm.changeCropSize($event, false, true, 0, 1)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-line line-a\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, true, false, 1, 0)},\"touchstart\":function($event){_vm.changeCropSize($event, true, false, 1, 0)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-line line-s\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, false, true, 0, 2)},\"touchstart\":function($event){_vm.changeCropSize($event, false, true, 0, 2)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-line line-d\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, true, false, 2, 0)},\"touchstart\":function($event){_vm.changeCropSize($event, true, false, 2, 0)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point1\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, true, true, 1, 1)},\"touchstart\":function($event){_vm.changeCropSize($event, true, true, 1, 1)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point2\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, false, true, 0, 1)},\"touchstart\":function($event){_vm.changeCropSize($event, false, true, 0, 1)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point3\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, true, true, 2, 1)},\"touchstart\":function($event){_vm.changeCropSize($event, true, true, 2, 1)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point4\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, true, false, 1, 0)},\"touchstart\":function($event){_vm.changeCropSize($event, true, false, 1, 0)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point5\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, true, false, 2, 0)},\"touchstart\":function($event){_vm.changeCropSize($event, true, false, 2, 0)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point6\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, true, true, 1, 2)},\"touchstart\":function($event){_vm.changeCropSize($event, true, true, 1, 2)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point7\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, false, true, 0, 2)},\"touchstart\":function($event){_vm.changeCropSize($event, false, true, 0, 2)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point8\",on:{\"mousedown\":function($event){_vm.changeCropSize($event, true, true, 2, 2)},\"touchstart\":function($event){_vm.changeCropSize($event, true, true, 2, 2)}}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23097b3f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/vue-cropper/vue-cropper.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23097b3f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./vue-cropper.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./vue-cropper.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./vue-cropper.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23097b3f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./vue-cropper.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-23097b3f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/vue-cropper/vue-cropper.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}