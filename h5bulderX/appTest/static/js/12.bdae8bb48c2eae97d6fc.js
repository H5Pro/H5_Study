webpackJsonp([12],{R3MO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Xxa5"),a=n.n(s),o=n("exGp"),i=n.n(o),r=(n("f1Vh"),n("ZQVe")),d=n.n(r),l=n("7+uW"),c=n("teIl"),u=n("PZVu"),p=n("uWBr");l.default.component(d.a.name,d.a);c.a;l.default.component(d.a.name,d.a);var v=null,m={name:"bindPhone",components:{Header:c.a},data:function(){return{step:1,phone:"",validCode:"",new_phone:"",sendCodeCD:0}},mounted:function(){this.phone=this.$store.state.User.user.mobile},methods:{onSendCodeClicked:function(){var e=this;return i()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.phone.length<1)){t.next=3;break}return window.EventBus.$emit("globalMessage","请输入手机号码"),t.abrupt("return");case 3:if(u.a.isPhoneValid(e.phone)){t.next=6;break}return window.EventBus.$emit("globalMessage","请输入正确的手机号码"),t.abrupt("return");case 6:return t.next=8,Object(p._3)(e.phone,e.$store.state.User.uuid);case 8:200===(n=t.sent).code&&window.EventBus.$emit("globalMessage",n.msg),e.sendCodeCD=60,e.startTimer();case 12:case"end":return t.stop()}},t,e)}))()},startTimer:function(){var e=this;v=setInterval(function(){e.sendCodeCD>0?e.sendCodeCD--:clearInterval(v)},1e3)},onNextStepClicked:function(){this.step=2}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mfw-page with-header page-session"},[n("Header",{attrs:{title:"绑定手机号"}}),e._v(" "),n("div",{staticClass:"mfw-page-section"},[n("div",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],staticClass:"section-content pd20"},[n("mt-field",{attrs:{placeholder:"请输入11位手机号",type:"tel"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),n("mt-field",{attrs:{placeholder:"输入验证码",type:"text"},model:{value:e.validCode,callback:function(t){e.validCode=t},expression:"validCode"}},[n("button",{staticClass:"mfw-button size-sm primary btn-sendcode",attrs:{disabled:e.sendCodeCD>0},domProps:{textContent:e._s(0===e.sendCodeCD?"发送验证码":e.sendCodeCD+"秒后重新发送")},on:{click:e.onSendCodeClicked}})])],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}],staticClass:"mfw-page-section"},[n("div",{staticClass:"section-content pd20"},[n("mt-field",{attrs:{placeholder:"请输入新的手机号",type:"tel"},model:{value:e.new_phone,callback:function(t){e.new_phone=t},expression:"new_phone"}})],1)]),e._v(" "),n("div",{staticClass:"menus"},[n("button",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],staticClass:"mfw-button primary round size-lg",on:{click:e.onNextStepClicked}},[e._v("下一步")]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}],staticClass:"mfw-button primary round size-lg"},[e._v("绑  定")])])],1)},staticRenderFns:[]};var f=n("VU/8")(m,h,!1,function(e){n("f0BH")},null,null);t.default=f.exports},f0BH:function(e,t){}});
//# sourceMappingURL=12.bdae8bb48c2eae97d6fc.js.map