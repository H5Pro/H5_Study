webpackJsonp([15],{CWdR:function(e,s){},qWqu:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("Xxa5"),n=t.n(a),o=t("exGp"),r=t.n(o),i=(t("f1Vh"),t("ZQVe")),d=t.n(i),l=t("7+uW"),c=t("teIl"),u=t("PZVu"),p=t("uWBr");l.default.component(d.a.name,d.a);c.a;l.default.component(d.a.name,d.a);var w=null,v={name:"login",components:{Header:c.a},data:function(){return{step:1,phone:"",validCode:"",password:"",rePassword:"",passwordShowed:!1,sendCodeCD:0}},mounted:function(){var e=this.$store.state.User.user||{};this.phone=e.mobile},methods:{showPassword:function(){this.passwordShowed=!this.passwordShowed},onSendCodeClicked:function(){var e=this;return r()(n.a.mark(function s(){var t;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(e.phone.length<1)){s.next=3;break}return window.EventBus.$emit("globalMessage","请输入手机号码"),s.abrupt("return");case 3:if(u.a.isPhoneValid(e.phone)){s.next=6;break}return window.EventBus.$emit("globalMessage","请输入正确的手机号码"),s.abrupt("return");case 6:return s.next=8,Object(p._3)(e.phone,e.$store.state.User.uuid,e.$store.state.User.token);case 8:200===(t=s.sent).code&&window.EventBus.$emit("globalMessage",t.msg),e.sendCodeCD=60,e.startTimer();case 12:case"end":return s.stop()}},s,e)}))()},startTimer:function(){var e=this;w=setInterval(function(){e.sendCodeCD>0?e.sendCodeCD--:clearInterval(w)},1e3)},onNextStepClicked:function(){u.a.isPhoneValid(this.phone)?this.validCode?this.step=2:window.EventBus.$emit("globalMessage","请输入短信验证码"):window.EventBus.$emit("globalMessage","请输入正确的手机号码")},onResetPwd:function(){var e=this;return r()(n.a.mark(function s(){var t,a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e.password&&e.rePassword&&e.password===e.rePassword){s.next=3;break}return window.EventBus.$emit("globalMessage","请输入正确的密码和重复密码"),s.abrupt("return");case 3:return t=e.$store.state.User||{},s.next=6,Object(p.V)(t.uuid,e.phone,e.password,e.rePassword,e.validCode);case 6:a=s.sent,window.EventBus.$emit("globalMessage",a.msg),200===a.code&&e.$router.go(-1);case 9:case"end":return s.stop()}},s,e)}))()}}},m={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"mfw-page with-header page-session"},[t("Header",{attrs:{title:"重置密码"}}),e._v(" "),t("div",{staticClass:"mfw-page-section"},[t("div",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],staticClass:"section-content pd20"},[t("mt-field",{attrs:{placeholder:"请输入11位手机号",type:"tel"},model:{value:e.phone,callback:function(s){e.phone=s},expression:"phone"}}),e._v(" "),t("mt-field",{attrs:{placeholder:"输入验证码",type:"text"},model:{value:e.validCode,callback:function(s){e.validCode=s},expression:"validCode"}},[t("button",{staticClass:"mfw-button size-sm primary btn-sendcode",attrs:{disabled:e.sendCodeCD>0},domProps:{textContent:e._s(0===e.sendCodeCD?"发送验证码":e.sendCodeCD+"秒后重新发送")},on:{click:e.onSendCodeClicked}})])],1)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}],staticClass:"mfw-page-section"},[t("div",{staticClass:"section-content pd20"},[t("mt-field",{attrs:{placeholder:"请输入新的密码",type:"password"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),e._v(" "),t("mt-field",{attrs:{placeholder:"请再次输入新的密码",type:"password"},model:{value:e.rePassword,callback:function(s){e.rePassword=s},expression:"rePassword"}})],1)]),e._v(" "),t("div",{staticClass:"menus"},[t("button",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],staticClass:"mfw-button primary round size-lg",on:{click:e.onNextStepClicked}},[e._v("下一步")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}],staticClass:"mfw-button primary round size-lg",on:{click:e.onResetPwd}},[e._v("重置密码")])])],1)},staticRenderFns:[]};var h=t("VU/8")(v,m,!1,function(e){t("CWdR")},null,null);s.default=h.exports}});
//# sourceMappingURL=15.e70f1f5efcc75aa8daca.js.map