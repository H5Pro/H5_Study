{"version":3,"sources":["webpack:///./src/pages/Strategy/create.vue","webpack:///./src/pages/Strategy/create.vue?d34c","webpack:///./src/pages/Strategy/create.vue?e0e4","webpack:///./src/utils/MathUtil.js"],"names":["create_timer","Header","create_leaving","Strategy_create","name","components","data","stockDetail","organ","customer","optionData","userMonery","can_bring_money","selectedTab","leverageSelect","selfMoney","winStopAt","loseStopAt","lowestStop","buyNumber","discount","freeTime","parseInt","this","fee_time","t","MathUtil","multiply","delayFee","toFixed","coupons","length","selectedCouponIndex","add","div_money","totalMoney","Number","buyCost","now_price","quanshangFeeRatio","res","market_id","parseFloat","jianguan_fee","gui_fee","guohu_fee","guanliFeeRatio","add_service","service_fee","shouxuFeeRatio","add_buy_commission","buy_commission","feeDesc","push","join","fee","cost","res1","res2","res3","Math","max","result","delay_fee","add_delay_fee","payMoney","r","delay_days","finalMoney","couponsData","mounted","loadStrategy","beforeDestroy","clearTimeout","watch","floor","loadAvailableCoupons","String","replace","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","i","wrap","_context","prev","next","Object","API","$store","state","User","token","$route","params","code","sent","policy","policy_leverage","split","stock","usermoney","CacheUtil","fetchFromLocal","policy_money","tp_limit","loadStock","stop","_this2","_callee2","_context2","setTimeout","onNewsTabItemClicked","newV","id","reduceWin","addWin","reduceLose","addLose","submit","_this3","hasOwnProperty","min_money","window","EventBus","$emit","max_money","message_box_default","confirm","confirmButtonText","then","_callee3","_context3","buy","_this4","_callee4","_context4","coupon","_this5","_callee5","stockCount","_context5","stock_code","coupon_code","saveToLocal","$router","path","pages_Strategy_create","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","_l","optionItem","index","key","class","on","click","$event","_s","policy_name","stock_name","number-up","dif_money","number-down","dif_rate","to","directives","rawName","value","expression","type","domProps","input","target","composing","leverage","checked","_q","change","for","risk_margin_limit","disabled","policy_time","policy_time_text","limit_money","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","isInteger","val","toInteger","floatNum","ret","times","num","isNegative","strfi","dotPos","indexOf","len","substr","pow","intNum","abs","operation","b","inDigits","op","o1","o2","n1","n2","t1","t2","digits","subtract","divide"],"mappings":"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","file":"static/js/10.45ca20d91010041e3e68.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Header from '../../components/Header'\nimport {queryStrategyParams, requestBuyStragegy, queryStockDetail, queryavailableCoupons} from '../../api/API'\nimport CacheUtil from '../../utils/CacheUtil'\nimport MathUtil from '../../utils/MathUtil'\nimport { MessageBox } from 'mint-ui'\n\nlet timer = null\nlet leaving = false\nexport default {\n  name: 'strategy',\n  components: {\n    Header\n  },\n  data () {\n    return {\n      stockDetail: {},\n      organ: {},\n      customer: {},\n      optionData: [{}],\n      userMonery: {can_bring_money: 0},\n      selectedTab: 0,\n      leverageSelect: 0,\n      selfMoney: 0,\n      winStopAt: 0,\n      loseStopAt: 0,\n      lowestStop: 0,\n      buyNumber: 0,\n      discount () {\n        let freeTime = parseInt(this.optionData[this.selectedTab].fee_time)\n        let t = 0\n        if (freeTime > 0) {\n          t = MathUtil.multiply(this.delayFee(), freeTime).toFixed(2)\n        }\n        if (this.coupons.length > 0 && this.selectedCouponIndex !== -1) {\n          t = MathUtil.add(t, this.coupons[this.selectedCouponIndex].div_money)\n        }\n        return t\n      },\n      totalMoney () {\n        return this.selfMoney * Number(this.leverageSelect)\n      },\n      buyCost () {\n        return MathUtil.multiply(this.stockDetail.now_price, this.buyNumber)\n      },\n      quanshangFeeRatio () {\n        let res = parseInt(this.stockDetail.market_id) === 2 ? parseFloat(this.optionData[this.selectedTab].jianguan_fee) : 0 // parseFloat(this.optionData[this.selectedTab].yinhua_tax)\n        res = MathUtil.add(res, parseFloat(this.optionData[this.selectedTab].gui_fee))\n        res = MathUtil.add(res, parseFloat(this.optionData[this.selectedTab].guohu_fee))\n        return res\n      },\n      guanliFeeRatio () {\n        return MathUtil.add(parseFloat(this.customer.add_service), parseFloat(this.optionData[this.selectedTab].service_fee))\n      },\n      shouxuFeeRatio () {\n        return MathUtil.add(parseFloat(this.customer.add_buy_commission), parseFloat(this.optionData[this.selectedTab].buy_commission))\n      },\n      feeDesc () {\n        let t = []\n        if (this.quanshangFeeRatio() > 0) {\n          t.push('券商代收')\n        }\n        if (this.guanliFeeRatio() > 0) {\n          t.push('管理费')\n        }\n        if (this.shouxuFeeRatio() > 0) {\n          t.push('手续费')\n        }\n        return t.join('+')\n      },\n      fee () {\n        let cost = this.buyCost()\n        // 券商代收\n        let res1 = MathUtil.multiply(cost, this.quanshangFeeRatio())\n        // 管理费\n        let res2 = MathUtil.multiply(cost, this.guanliFeeRatio())\n        // 手续费\n        let res3 = this.shouxuFeeRatio()\n        res3 = Math.max(MathUtil.multiply(cost, res3), 5)\n        let result = MathUtil.add(res1, res2)\n        result = MathUtil.add(result, res3).toFixed(2)\n        return result\n      },\n      delayFee () {\n        let fee = MathUtil.add(parseFloat(this.optionData[this.selectedTab].delay_fee), parseFloat(this.customer.add_delay_fee))\n        return MathUtil.multiply(this.buyCost(), fee).toFixed(2)\n      },\n      payMoney () {\n        let r = MathUtil.add(parseFloat(this.selfMoney), parseFloat(this.fee()))\n        return MathUtil.add(r, MathUtil.multiply(this.delayFee(), parseInt(this.optionData[this.selectedTab].delay_days)))\n      },\n      finalMoney () {\n        return this.payMoney() - this.discount()\n      },\n      selectedCouponIndex: -1,\n      coupons: [],\n      couponsData: {}\n    }\n  },\n  mounted () {\n    leaving = false\n    this.loadStrategy()\n  },\n  beforeDestroy () {\n    leaving = true\n    if (timer !== null) {\n      clearTimeout(timer)\n      timer = null\n    }\n  },\n  watch: {\n    selfMoney () {\n      this.buyNumber = Math.floor(this.totalMoney() / parseFloat(this.stockDetail.now_price) / 100) * 100\n      this.loadAvailableCoupons()\n      this.selfMoney = String(this.selfMoney).replace(/[^\\d]/g, '')\n    },\n    leverageSelect () {\n      this.buyNumber = Math.floor(this.totalMoney() / parseFloat(this.stockDetail.now_price) / 100) * 100\n      this.loseStopAt = parseFloat(this.stockDetail.now_price * (1 - 1 / this.leverageSelect)).toFixed(2)\n      this.lowestStop = parseFloat(this.stockDetail.now_price * (1 - 1 / this.leverageSelect)).toFixed(2)\n    }\n  },\n  methods: {\n    async loadStrategy () {\n      let res = await queryStrategyParams(this.$store.state.User.token, this.$route.params.code)\n      if (res.code === 200) {\n        let data = res.data.policy\n        for (let i = 0; i < data.length; i++) {\n          data[i].policy_leverage = data[i].policy_leverage.split(',')\n        }\n        this.optionData = data\n        this.stockDetail = res.data.stock\n        this.userMonery = res.data.usermoney\n        this.organ = res.data.organ\n        this.customer = res.data.customer\n        if (CacheUtil.fetchFromLocal('inputMoney')) {\n          this.selfMoney = Number(CacheUtil.fetchFromLocal('inputMoney'))\n        } else {\n          this.selfMoney = this.optionData[this.selectedTab].policy_money * 10000\n        }\n        this.leverageSelect = this.optionData[0].policy_leverage[0]\n        this.winStopAt = parseFloat(this.stockDetail.now_price * (1 + parseFloat(this.optionData[this.selectedTab].tp_limit))).toFixed(2)\n        this.loadStock()\n      }\n    },\n    async loadStock () {\n      let res = await queryStockDetail(this.$route.params.code, this.$store.state.User.token, true)\n      if (res.code && res.code === 200) {\n        this.stockDetail = res.data\n      }\n      if (!leaving) {\n        timer = setTimeout(this.loadStock, 3000)\n      }\n    },\n    onNewsTabItemClicked (newV) {\n      this.selectedTab = newV\n      if (CacheUtil.fetchFromLocal('inputMoney')) {\n        this.selfMoney = Number(CacheUtil.fetchFromLocal('inputMoney'))\n      } else {\n        this.selfMoney = this.optionData[this.selectedTab].policy_money * 10000\n      }\n      this.selectedCouponIndex = -1\n      this.coupons = this.couponsData[this.optionData[this.selectedTab].id] || []\n      this.leverageSelect = this.optionData[this.selectedTab].policy_leverage[0]\n      this.loseStopAt = parseFloat(this.stockDetail.now_price * (1 - 1 / (1 + this.leverageSelect))).toFixed(2)\n      this.lowestStop = parseFloat(this.stockDetail.now_price * (1 - 1 / (1 + this.leverageSelect))).toFixed(2)\n    },\n    reduceWin () {\n      if (this.winStopAt - 0.01 > 0) {\n        this.winStopAt = (parseFloat(this.winStopAt) - 0.01).toFixed(2)\n      }\n    },\n    addWin () {\n      this.winStopAt = (parseFloat(this.winStopAt) + 0.01).toFixed(2)\n    },\n    reduceLose () {\n      if (this.loseStopAt - 0.01 > 0) {\n        this.loseStopAt = (parseFloat(this.loseStopAt) - 0.01).toFixed(2)\n      }\n    },\n    addLose () {\n      this.loseStopAt = (parseFloat(this.loseStopAt) + 0.01).toFixed(2)\n    },\n    submit () {\n      if (!this.stockDetail.hasOwnProperty('stock_code')) {\n        window.EventBus.$emit('globalMessage', '数据加载失败，请稍候重试')\n        return\n      }\n      if (parseFloat(this.selfMoney) < parseFloat(this.optionData[this.selectedTab].min_money)) {\n        window.EventBus.$emit('globalMessage', `本金不能少于${this.optionData[this.selectedTab].min_money}`)\n        return\n      }\n      if (parseFloat(this.selfMoney) > this.optionData[this.selectedTab].max_money) {\n        window.EventBus.$emit('globalMessage', `本金最多不能超过${this.optionData[this.selectedTab].max_money}`)\n        return\n      }\n      if (this.buyNumber === 0) {\n        window.EventBus.$emit('globalMessage', '当前选项可购买股数为0')\n        return\n      }\n      MessageBox.confirm('请确认是否已详细了解了交易所需的费用和可能面临的风险，点击继续提交订单', '确认下单', {confirmButtonText: '继续'}).then(async () => {\n        this.buy()\n      }, () => {})\n    },\n    async loadAvailableCoupons () {\n      let res = await queryavailableCoupons(this.$store.state.User.token, this.selfMoney, this.optionData[this.selectedTab].id)\n      if (res.code && res.code === 200 && res.data.hasOwnProperty('coupon')) {\n        this.couponsData = res.data.coupon\n        this.coupons = res.data.coupon[this.optionData[this.selectedTab].id] || []\n      } else {\n        this.couponsData = {}\n        this.coupons = []\n        this.selectedCouponIndex = -1\n      }\n    },\n    async buy () {\n      let stockCount = Math.floor((parseFloat(this.selfMoney) + parseFloat(this.selfMoney) * this.leverageSelect) / parseFloat(this.stockDetail.now_price))\n      let res = await requestBuyStragegy(\n        this.$store.state.User.token,\n        this.stockDetail.stock_code,\n        this.selfMoney,\n        this.leverageSelect,\n        this.stockDetail.now_price,\n        stockCount,\n        this.optionData[this.selectedTab].id,\n        this.winStopAt,\n        this.loseStopAt,\n        this.selectedCouponIndex > -1 ? this.coupons[this.selectedCouponIndex].coupon_code : null\n      )\n      if (res.code === 200) {\n        CacheUtil.saveToLocal('inputMoney', this.selfMoney)\n        window.EventBus.$emit('globalMessage', '下单成功')\n        this.$router.push({path: '/strategy'})\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Strategy/create.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mfw-page with-header page-strategy-create\"},[_c('Header',{attrs:{\"title\":\"创建策略\"}}),_vm._v(\" \"),_c('div',{staticClass:\"tab-con\"},[_c('div',{staticClass:\"mfw-tab\"},[_c('ul',_vm._l((_vm.optionData),function(optionItem,index){return _c('li',{key:index,staticClass:\"tab-item\",class:{'on': _vm.selectedTab === index},on:{\"click\":function($event){_vm.onNewsTabItemClicked(index)}}},[_vm._v(\"\\n          \"+_vm._s(optionItem.policy_name)),_c('span',{staticClass:\"tab-divide-line\"})])}))])]),_vm._v(\" \"),_c('div',{staticClass:\"mfw-page-section\"},[_c('div',{staticClass:\"section-content pd0\"},[_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"stock-info pd20\"},[_c('div',{staticClass:\"l\"},[_c('p',[_c('strong',[_c('span',{staticClass:\"stock-name\"},[_vm._v(_vm._s(_vm.stockDetail.stock_name))])])]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"stock-code\"},[_vm._v(_vm._s(_vm.$route.params.code))])])]),_vm._v(\" \"),_c('div',{staticClass:\"c\"},[_c('p',[_c('span',{staticClass:\"number big\",class:{'number-up': _vm.stockDetail.dif_money > 0, 'number-down': _vm.stockDetail.dif_money < 0}},[_vm._v(_vm._s(_vm.stockDetail.now_price))])]),_vm._v(\" \"),_c('p',{staticClass:\"clear-fix\"},[_c('span',{staticClass:\"float-left number\",class:{'number-up': _vm.stockDetail.dif_money > 0, 'number-down': _vm.stockDetail.dif_money < 0}},[_vm._v(_vm._s(_vm.stockDetail.dif_money))]),_vm._v(\" \"),_c('span',{staticClass:\"float-right number\",class:{'number-up': _vm.stockDetail.dif_money > 0, 'number-down': _vm.stockDetail.dif_money < 0}},[_vm._v(_vm._s(_vm.stockDetail.dif_rate)+\"%\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"r\"},[_c('router-link',{attrs:{\"to\":'/stock/' + _vm.$route.params.code}},[_vm._v(\"行情\"),_c('em',{staticClass:\"arrow-r dark\"})])],1)])])])]),_vm._v(\" \"),_c('div',{staticClass:\"mfw-page-section\"},[_c('div',{staticClass:\"section-content\"},[_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"t form-item-flex  pd20\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"保证金：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('br'),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selfMoney),expression:\"selfMoney\"}],staticClass:\"width-sm\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.selfMoney)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.selfMoney=$event.target.value}}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('span',{staticClass:\"font-sm gray2\"},[_vm._v(\"(最少\"+_vm._s(_vm.optionData[_vm.selectedTab].min_money)+\"，最高\"+_vm._s(_vm.optionData[_vm.selectedTab].max_money)+\")\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex pd20\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"投资人配比：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},_vm._l((_vm.optionData[_vm.selectedTab].policy_leverage),function(leverage,index){return _c('div',{key:index,staticClass:\"leverage-item\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.leverageSelect),expression:\"leverageSelect\"}],staticClass:\"radio-select\",attrs:{\"id\":'radio_' + index,\"type\":\"radio\",\"name\":\"pz-ratio\"},domProps:{\"value\":leverage,\"checked\":_vm._q(_vm.leverageSelect,leverage)},on:{\"change\":function($event){_vm.leverageSelect=leverage}}}),_vm._v(\" \"),_c('label',{staticClass:\"radio-label\",attrs:{\"for\":'radio_' + index}},[_vm._v(_vm._s(_vm.selfMoney * leverage))])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex pd20\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"操盘资金：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('span',{staticClass:\"number\"},[_vm._v(_vm._s(_vm.totalMoney()))])])]),_vm._v(\" \"),_c('div',{staticClass:\"d form-item-flex pd20\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"强平线：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_vm._v(\"\\n            净资产/保证金 <= \"+_vm._s(parseFloat(_vm.organ.risk_margin_limit)*100)+\"%\\n          \")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"mfw-page-section\"},[_c('div',{staticClass:\"section-content pd0\"},[_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"现价买入：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('span',{staticClass:\"number\"},[_vm._v(_vm._s(_vm.stockDetail.now_price))]),_vm._v(\" \"),_c('span',{staticClass:\"gray2\"},[_vm._v(\"可买\"),_c('i',[_vm._v(_vm._s(_vm.buyNumber))]),_vm._v(\"股\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"止盈：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('div',{staticClass:\"amount-select\"},[_c('button',{staticClass:\"button reduce\",on:{\"click\":_vm.reduceWin}},[_vm._v(\"－\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.winStopAt),expression:\"winStopAt\"}],staticClass:\"val\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.winStopAt)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.winStopAt=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"button add\",on:{\"click\":_vm.addWin}},[_vm._v(\"＋\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"止损：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('div',{staticClass:\"amount-select\"},[_c('button',{staticClass:\"button reduce\",attrs:{\"disabled\":parseFloat(_vm.loseStopAt) <= parseFloat(_vm.lowestStop)},on:{\"click\":_vm.reduceLose}},[_vm._v(\"－\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.loseStopAt),expression:\"loseStopAt\"}],staticClass:\"val\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.loseStopAt)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.loseStopAt=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"button add\",on:{\"click\":_vm.addLose}},[_vm._v(\"＋\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"d form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"预计可赚：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('span',{staticClass:\"number number-up\"},[_vm._v(_vm._s(parseFloat((this.winStopAt - _vm.stockDetail.now_price) * _vm.buyNumber).toFixed(2)))])])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"mfw-page-section\"},[_c('div',{staticClass:\"section-content pd0\"},[_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"服务费：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('span',{staticClass:\"number\"},[_vm._v(_vm._s(_vm.fee()))]),_vm._v(\" \\n            \"),_c('span',{staticClass:\"gray2 font-sm\"},[_vm._v(\"(\"+_vm._s(this.feeDesc())+\")\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"递延费：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('span',{staticClass:\"number\"},[_vm._v(_vm._s(_vm.delayFee()))]),_vm._v(\" \"),_c('span',{staticClass:\"gray2 font-sm\"},[_vm._v(\"（元/交易日）\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"持仓时间：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('span',{staticClass:\"number\"},[_vm._v(_vm._s(this.optionData[this.selectedTab].policy_time))]),_vm._v(\"天 \"),_c('span',{staticClass:\"gray2 font-sm\"},[_vm._v(\"（\"+_vm._s(this.optionData[this.selectedTab].policy_time_text)+\"）\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"共计(元)：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('br'),_vm._v(\" \"),_c('span',{staticClass:\"number number-up\"},[_vm._v(_vm._s(_vm.payMoney()))]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('span',{staticClass:\"gray2 font-sm\"},[_vm._v(\"(准备资金=保证金+服务费+递延费*天数)\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"优惠(元)：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content clear-fix\"},[_c('span',{staticClass:\"number number-up\"},[_vm._v(_vm._s(_vm.discount()))]),_vm._v(\" \"),_c('span',{staticClass:\"gray2 font-sm\"},[_vm._v(\"（免息时间：\"+_vm._s(this.optionData[this.selectedTab].fee_time)+\"天）\")]),_vm._v(\" \"),_c('span',{staticClass:\"float-right menu-coupon\"},[_vm._v(\"优惠券 \"),_c('span',{staticClass:\"gray2 font-sm\"},[_vm._v(\"(\"+_vm._s(_vm.coupons.length)+\"张可用)\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"coupon-list-con\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.coupons.length < 1),expression:\"coupons.length < 1\"}],staticClass:\"gray2 font-sm no-coupon\"},[_vm._v(\"无可用优惠券\")]),_vm._v(\" \"),_c('ul',{staticClass:\"coupon-list\"},_vm._l((_vm.coupons),function(coupon,index){return _c('li',{key:index},[_c('label',{staticClass:\"mfw-radio-item\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedCouponIndex),expression:\"selectedCouponIndex\"}],staticClass:\"mfw-radio-input\",attrs:{\"type\":\"radio\"},domProps:{\"value\":index,\"checked\":_vm._q(_vm.selectedCouponIndex,index)},on:{\"change\":function($event){_vm.selectedCouponIndex=index}}}),_vm._v(\" \"),_c('span',{staticClass:\"mfw-radio-labe\"},[_vm._v(\"\\n                  \"+_vm._s(coupon.div_money)+\"元优惠券\\n                  \"),_c('span',{staticClass:\"gray2 font-sm\"},[_vm._v(\"(满\"+_vm._s(coupon.limit_money)+\"可用)\")])])])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"t form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"用户支付：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('span',{staticClass:\"number big number-up\"},[_vm._v(_vm._s(_vm.finalMoney()))]),_vm._v(\"元\\n          \")])]),_vm._v(\" \"),_c('div',{staticClass:\"d form-item-flex\"},[_c('div',{staticClass:\"form-label\"},[_vm._v(\"可用资金：\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-content\"},[_c('span',{staticClass:\"number big number-up\"},[_vm._v(_vm._s(_vm.userMonery.can_bring_money))]),_vm._v(\"元\\n          \")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"menus\"},[_c('button',{staticClass:\"button mfw-button primary size-lg\",on:{\"click\":_vm.submit}},[_vm._v(\"买入\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-10498680\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Strategy/create.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-10498680\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./create.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./create.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./create.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-10498680\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./create.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Strategy/create.vue\n// module id = null\n// module chunks = ","/**\n * Created by hb on 2018/8/15.\n */\n\nexport default {\n  /*\n   * 判断val是否为一个整数\n   */\n  isInteger (val) {\n    return Math.floor(val) === val\n  },\n  /*\n   * 将一个浮点数转成整数，返回整数和倍数。如 3.14 >> 314，倍数是 100\n   * @param floatNum {number} 小数\n   * @return {object}\n   *   {times:100, num: 314}\n   */\n  toInteger (floatNum) {\n    let ret = {times: 1, num: 0}\n    let isNegative = floatNum < 0\n    if (this.isInteger(floatNum)) {\n      ret.num = floatNum\n      return ret\n    }\n    let strfi = floatNum + ''\n    let dotPos = strfi.indexOf('.')\n    let len = strfi.substr(dotPos + 1).length\n    let times = Math.pow(10, len)\n    let intNum = parseInt(Math.abs(floatNum) * times + 0.5, 10)\n    ret.times = times\n    if (isNegative) {\n      intNum = -intNum\n    }\n    ret.num = intNum\n    return ret\n  },\n  /*\n   * 核心方法，实现加减乘除运算，确保不丢失精度\n   * 思路：把小数放大为整数（乘），进行算术运算，再缩小为小数（除）\n   *\n   * @param a {number} 运算数1\n   * @param b {number} 运算数2\n   * @param digits {number} 精度，保留的小数点数，比如 2, 即保留为两位小数\n   * @param op {string} 运算类型，有加减乘除（add/subtract/multiply/divide）\n   *\n   */\n  operation (a, b, inDigits, op) {\n    let o1 = this.toInteger(a)\n    let o2 = this.toInteger(b)\n    let n1 = o1.num\n    let n2 = o2.num\n    let t1 = o1.times\n    let t2 = o2.times\n    let max = t1 > t2 ? t1 : t2\n    let result = null\n    switch (op) {\n      case 'add':\n        if (t1 === t2) { // 两个小数位数相同\n          result = n1 + n2\n        } else if (t1 > t2) { // o1 小数位 大于 o2\n          result = n1 + n2 * (t1 / t2)\n        } else { // o1 小数位 小于 o2\n          result = n1 * (t2 / t1) + n2\n        }\n        return result / max\n      case 'subtract':\n        if (t1 === t2) {\n          result = n1 - n2\n        } else if (t1 > t2) {\n          result = n1 - n2 * (t1 / t2)\n        } else {\n          result = n1 * (t2 / t1) - n2\n        }\n        return result / max\n      case 'multiply':\n        result = (n1 * n2) / (t1 * t2)\n        return result\n      case 'divide':\n        result = (n1 / n2) * (t2 / t1)\n        return result\n    }\n  },\n  // 加减乘除的四个接口\n  add (a, b, digits) {\n    return this.operation(a, b, digits, 'add')\n  },\n  subtract (a, b, digits) {\n    return this.operation(a, b, digits, 'subtract')\n  },\n  multiply (a, b, digits) {\n    return this.operation(a, b, digits, 'multiply')\n  },\n  divide (a, b, digits) {\n    return this.operation(a, b, digits, 'divide')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/MathUtil.js"],"sourceRoot":""}